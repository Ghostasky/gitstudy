子网掩码 (subnet mask) ，它是一种用来指明一个 IP 地址的哪些位标识的是主机所在的子网，以及哪些位标识的是主机的位掩码。子网掩码不能单独存在，它必须结合 IP 地址一起使用。

**它的主要作用有两个，一是用于屏蔽IP地址的一部分以区别网络标识和主机标识，并说明该IP地址是在局域网上，还是在远程网上。二是用于将一个大的IP网络划分为若干小的子网络。**

子网掩码 32 位与IP 地址 32 位相对应，IP 地址如果某位是网络地址，则子网掩码为1，否则为0。



-----------------------------

# VM虚拟机中三中网络设置

## 1.桥接

![img](1/70-16322052777782)

1. 该模式下物理网卡和虚拟网卡的IP地址处于同一个网段，子网掩码、网关、DNS等参数都相同。

2. 本地物理网卡和虚拟网卡通过VMnet0虚拟交换机进行桥接，虚拟机和主机位于VMnet0这个虚拟交换机的两端，这个交换机使得两端处在同一个网段中。

3. VMware中的每个虚拟系统相当于一台独立的主机，桥接模式下主机和虚拟机相当于同一个局域网中的两台电脑，虚拟机和宿主机处于同等地位。这种情况下主机和虚拟机要能够通讯，需要在同一个网段，这就需要手动配置虚拟系统的IP地址和子网掩码，保证虚拟机和宿主机处在同一网段中。虚拟机作为一台独立的主机可以与局域网中的任何一台电脑通信。

## 2.NAT(网络地址转换模式)

![img](1/70)

1.不需要任何手动的配置，IP地址等网络配置信息由VMnet8(NAT)虚拟网络的DHCP服务器提供，只要宿主机可以上网，虚拟机即可实现网络连接。主机的虚拟网卡VMware Network Adapter VMnet8和虚拟机虚拟网卡的IP地址处于同一个网段，子网掩码、网关、DNS等参数都相同，而主机的真实物理网卡（宿主机相当于路由器）和虚拟机的IP地址并不在同一个范围内。

2.虚拟系统处于虚拟的NAT网络中，虚拟机虚拟出了一个NAT服务器，使其虚拟网卡能够连接到Internet。在这种连接模式下Guest使用VMnet8虚拟交换机，在主机的网络共享中心中可以看到VMware NetworkAdapter VMnet8虚拟网卡，这块虚拟网卡连接在VMnet8虚拟交换机上与虚拟系统的虚拟网卡进行通信，即它的功能是让主机能够和VMnet8网段通信，但不是为VMnet8网段提供路由功能，去掉这个虚拟网卡Guest仍然可以上网，但是主机无法再访问VMnet8网段，即主机和虚拟机无法再进行通信。

3.VMware Network Adepter VMnet8虚拟网卡的IP地址是在安装VMware时由系统指定生成的，虚拟机虚拟出来的NAT网络所处的网段和VMware Network AdepterVMnet8虚拟网卡所处的网段是相同的，所以主机和虚拟机的两个虚拟网卡之间可以正常通信。

4.在NAT模式下，虚拟机虽然处于内部局域网，但是它是可以访问外网的，因为这时候宿主计算机相当于一台开启了DHCP功能的路由器，宿主机真实的物理网卡（即NAT device）连接着Network，此时虚拟机相当于局域网中的一台真实主机，所以虚拟机可以通过宿主计算机的DHCP来动态获得网络参数，相当于一台计算机通过路由器连接了外部互联网。宿主机可以访问虚拟机，但是局域网内其他主机是无法访问虚拟机的，因为NAT的网络在vmware提供的一个虚拟网络里。



## 3.主机模式

![img](1/70-16322054034744)

1.在此模式下所有的虚拟系统之间可以相互通信，但是虚拟系统所处的虚拟网络和宿主机所处的真实网络实际上是被隔离开的。尽管被隔离，但是在这种模式下虚拟系统和主机可以通信，相当于两台机器直接用双绞线相连，这时宿主机不再为虚拟机提供路由服务，所以虚拟机不能和外部Network进行通讯。

2.VMware Network Adepter VMnet1是Host用于与Host-Only虚拟网络进行通信的虚拟网卡，但Host-Only网络没有NAT服务，所以虚拟网络是不能连接到外部的互联网的，虚拟机之间形成的虚拟网络是一个全封闭的网络，和外部的唯一联系就是虚拟机能够和主机进行通信。

3.VMware Network Adepter VMnet1虚拟网卡的IP地址也是VMware系统指定的，VMwareNetwork Adepter VMnet1虚拟网卡和虚拟机的虚拟网卡在同一个网段，这种模式下物理网卡和虚拟机的虚拟网卡不在同一个网段。

注：NAT模式与主机模式十分相似，主要不同之处即在于主机模式中宿主机不再具备NAT功能，即不再相当于虚拟机访问Internet的路由器。





VMnet0：用于虚拟桥接网络下的虚拟交换机

VMnet1：用于虚拟Host-Only网络下的虚拟交换机

VMnet8：用于虚拟NAT网络下的虚拟交换机

VMware Network Adepter VMnet1：Host用于与Host-Only虚拟网络进行通信的虚拟网卡

VMware Network Adepter VMnet8：Host用于与NAT虚拟网络进行通信的虚拟网卡

VMnet8和VMnet1提供DHCP服务，VMnet0虚拟网络则不提供。
